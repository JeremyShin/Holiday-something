<html xmlns:th="http://www.springframework.org/schema/data/jaxb"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/default">

<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
</th:block>

<div layout:fragment="content">


  <div id="dashboard">
    <h1 align="center">상품 목록</h1>

    <div>
    <form method="GET" action="/admin/product/product_list" id="product-search-form">
      <table width="200" boarder="0" align="center">
        <tr>
          <td align="center" valign="bottom">
            <select name="searchType">
              <option value="name" selected="selected">상품명</option>
              <option value="code">제품코드</option>
            </select>
          </td>
          <td>
            <input type="search" size="16" name="keyword">
          </td>
          <td>
            <input type="submit" value="검색">
          </td>
        </tr>
      </table>
    </form>
    </div>

    <!-- 값에 따른 정렬, 추후 구현 예정 -->
    <!--<div align="right">-->
      <!--<button type="button" name="sort" value="sellingQuantity" onclick="location.href='/admin/product/product_list?sort=#'">판매량순</button>-->
      <!--<button type="button" name="sort" value="releaseDate" onclick="location.href='/admin/product/product_list?sort=#'">출시일순</button>-->
    <!--</div>-->

    <div class="tbl-container">
      <table id="product-list-tbl" border="1" style="width: 150%">
        <colgroup>
        </colgroup>
        <thead>
        <tr bgcolor="#ffd700">
          <th>이름</th>
          <th>제품코드</th>
          <th>판매가</th>
          <th>재고</th>
          <th>안전재고</th>
          <th>판매량</th>
          <th>등록일</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="product : ${products}">
          <td th:text="${product.name}"></td>
          <td th:text="${product.code}"></td>
          <td th:text="${product.sellingPrice}"></td>
          <td th:text="${product.quantity}"></td>
          <td th:text="${product.safeQuantity}"></td>
          <td th:text="${product.sellingQuantity}"></td>
          <td th:text="${product.regDate}"></td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- 모든 상품 페이징 처리 -->
    <div th:if="${search.getSearchType() == null}" id="page-numbers">
      <!--이전 페이지가 있다면 보임-->
      <td th:if="${products.hasPrevious()}">
        <a th:href="@{'/admin/product/product_list?page=' + ${products.number - 1}}">&larr;</a>
      </td>
      <!-- 페이지 목록 -->
      <th:block th:each="page : ${#numbers.sequence(1, products.getTotalPages())}">
        <a th:href="@{'/admin/product/product_list?page=' + ${page - 1}}">
          <span th:text="${page}"></span>
        </a>
      </th:block>
      <!--다음 페이지가 있다면 보임-->
      <td th:if="${products.hasNext()}">
        <a th:href="@{'/admin/product/product_list?page=' + ${products.number + 1} + '&searchType=' + ${search.getSearchType()} + '&keyword=' + ${search.getKeyword()}}">&rarr;</a>
      </td>
    </div>
    <!-- 검색된 상품 페이징 처리 -->
    <div th:if="${search.getSearchType() != null}" id="searchPage-numbers">
      <!--이전 페이지가 있다면 보임-->
      <td th:if="${products.hasPrevious()}">
        <a th:href="@{'/admin/product/product_list?page=' + ${products.number - 1} + '&searchType=' + ${search.getSearchType()} + '&keyword=' + ${search.getKeyword()}}">&larr;</a>
      </td>
      <!-- 페이지 목록 -->
      <th:block th:each="page : ${#numbers.sequence(1, products.getTotalPages())}">
        <a th:href="@{'/admin/product/product_list?page=' + ${page - 1} + '&searchType=' + ${search.getSearchType()} + '&keyword=' + ${search.getKeyword()}}">
          <span th:text="${page}"></span>
        </a>
      </th:block>
      <!--다음 페이지가 있다면 보임-->
      <td th:if="${products.hasNext()}">
        <a th:href="@{'/admin/product/product_list?page=' + ${products.number + 1}}">&rarr;</a>
      </td>
    </div>

  </div>

  <!-- 사용자 스크립트 추가 -->
  <th:block layout:fragment="script">
    <script th:src="@{/js/main.js}"></script>
  </th:block>
</div>
</html>