<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default.html}">

<head th:include="fragments/config :: configFragment">
  <title id="pageTitle">Page title</title>
  <!-- other elements you want to reference in your layout -->
</head>

<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
</th:block>

<div layout:fragment="content">

  <div id="dashboard">
    <h1 align="center">회원 적립금 변경</h1>
    <!-- cafe24는 적립금을 엑셀파일로 관리... -->
    <h4>회원 검색</h4>
    <div>
      <form method="GET" action="/admin/member/mileage/search"
            id="member-mileage-search-form">
        <table width="500px" border="1" align="center">
          <tr>
            <th scope="row" style="width: 180px;">아이디</th>
            <td>
              <input type="hidden" name="searchType" value="loginId">
              <input type="text" name="keyword" style="width: 300px;" placeholder="검색">
            </td>
            <td style="width: 50px; font-size: small; border: 0px;"><input type="submit" value="검색">
            </td>
          </tr>
        </table>
      </form>
    </div>
    <br>

    <h4>회원 적립금 변경</h4>
    <div class="tbl-container">
      <form method="POST" action="/admin/member/mileage/modify">
        <table id="member-mileage-search-tbl" border="1" style="width: 100%">
          <thead>
          <tr bgcolor="#ffd700">
            <th scope="col">아이디</th>
            <th scope="col">현재적립금</th>
            <th scope="col">증감여부</th>
            <th scope="col">적립금 금액</th>
          </tr>
          </thead>
          <tbody>
          <td th:text="${member.loginId}"></td>
          <td th:text="${member.mileage}"></td>
          <td>
            <select name="plusOrMinus">
              <option value="+">(+) 적립금 증액</option>
              <option th:if="${member.mileage} <= 0" disabled>(-) 적립금 차감</option>
              <option th:if="${member.mileage} > 0"value="-">(-) 적립금 차감</option>
            </select>
          </td>
          <td>
            <input type="number" style="width: 60px;" name="addMileage" id="mileageModify"/>
          </td>
          </tr>
          </tbody>
        </table>
        <input type="hidden" name="loginId" th:value="${member.loginId}"/>
        <input type="hidden" name="mileage" th:value="${member.mileage}"/>
        <input type="submit" value="수정" id="mileageModifyBtn">
      </form>
    </div>

    <script>
      // 사용자 스크립트 추가
      <!--
        TODO : js로 구현해야 할 것!
        1. 증감 여부에서 (-)를 선택했을 때 현재 적립금이 추가할 적립금보다 작으면 안 됨!
        2. 추가할 적립금 입력란에는 (-) 부호가 들어와서는 안됨.
        3. 수정 버튼을 클릭 시 적립금 입력란이 공란이면 값을 채우라고 띄워주자
        4. 수정 버튼을 클릭 시 '수정하시겠습니까?'라는 확인창을 띄워주자
        -->
    </script>

  </div>
</div>
</html>
